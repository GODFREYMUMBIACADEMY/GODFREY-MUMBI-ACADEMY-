<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Godfrey Mumbi Academy Dashboard</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #ffffff;
      color: #333;
    }
    header {
      background-color: #222;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
    section {
      padding: 1.5rem;
      border-bottom: 1px solid #ddd;
    }
    h2 {
      margin-top: 0;
    }
    .subject-section {
      margin-bottom: 2rem;
      border-radius: 8px;
      padding: 1rem;
    }
    .math { background-color: #f2f2f2; }
    .english { background-color: #e0f7fa; }
    .science { background-color: #e8f5e9; }
    .biology { background-color: #f3e5f5; }
    .chemistry { background-color: #fff3e0; }
    iframe {
      max-width: 100%;
      margin: 0.5rem 0;
    }
    footer {
      background-color: orange;
      color: white;
      text-align: center;
      padding: 1rem;
      font-style: italic;
    }
    ul { padding-left: 1.2rem; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>Subject Dashboard</h1>
  </header>

  <main>
    <section class="subject-section math">
      <h2>Mathematics</h2>
      <h3>🎥 Videos</h3>
      <iframe src="https://www.youtube.com/embed/8arr7OT2P6w" frameborder="0" allowfullscreen></iframe>
      <iframe src="https://www.youtube.com/embed/MJULvvEgv1I" frameborder="0" allowfullscreen></iframe>

      <h3>📚 Materials</h3>
      <strong>Pamphlets</strong>
      <ul>
        <li><a href="materials/pamphlets/math-pamphlet1.pdf" target="_blank">Math Pamphlet 1</a></li>
      </ul>
      <strong>Textbooks</strong>
      <ul>
        <li><a href="materials/textbooks/math-textbook1.pdf" target="_blank">Math Textbook 1</a></li>
      </ul>

      <h3>📝 Test Yourself</h3>
      <ul>
        <li><a href="quizzes/math-quiz1.pdf" target="_blank">Math Quiz 1</a></li>
      </ul>
    </section>

    <section class="subject-section english">
      <h2>English</h2>
      <h3>🎥 Videos</h3>
      <!-- Embed or link your English videos -->
      <h3>📚 Materials</h3>
      <strong>Pamphlets</strong>
      <ul>
        <li><a href="materials/pamphlets/english-pamphlet1.pdf" target="_blank">English Pamphlet 1</a></li>
      </ul>
      <strong>Textbooks</strong>
      <ul>
        <li><a href="materials/textbooks/english-textbook1.pdf" target="_blank">English Textbook 1</a></li>
      </ul>
      <h3>📝 Test Yourself</h3>
      <ul>
        <li><a href="quizzes/english-quiz1.pdf" target="_blank">English Quiz 1</a></li>
      </ul>
    </section>

    <section class="subject-section science">
      <h2>Science</h2>
      <h3>🎥 Videos</h3>
      <!-- Embed or link your Science videos -->
      <h3>📚 Materials</h3>
      <strong>Pamphlets</strong>
      <ul>
        <li><a href="materials/pamphlets/science-pamphlet1.pdf" target="_blank">Science Pamphlet 1</a></li>
      </ul>
      <strong>Textbooks</strong>
      <ul>
        <li><a href="materials/textbooks/science-textbook1.pdf" target="_blank">Science Textbook 1</a></li>
      </ul>
      <h3>📝 Test Yourself</h3>
      <ul>
        <li><a href="quizzes/science-quiz1.pdf" target="_blank">Science Quiz 1</a></li>
      </ul>
    </section>

    <section class="subject-section biology">
      <h2>Biology</h2>
      <h3>🎥 Videos</h3>
      <!-- Embed or link your Biology videos -->
      <h3>📚 Materials</h3>
      <strong>Pamphlets</strong>
      <ul>
        <li><a href="materials/pamphlets/biology-pamphlet1.pdf" target="_blank">Biology Pamphlet 1</a></li>
      </ul>
      <strong>Textbooks</strong>
      <ul>
        <li><a href="materials/textbooks/biology-textbook1.pdf" target="_blank">Biology Textbook 1</a></li>
      </ul>
      <h3>📝 Test Yourself</h3>
      <ul>
        <li><a href="quizzes/biology-quiz1.pdf" target="_blank">Biology Quiz 1</a></li>
      </ul>
    </section>

    <section class="subject-section chemistry">
      <h2>Chemistry</h2>
      <h3>🎥 Videos</h3>
      <!-- Embed or link your Chemistry videos -->
      <h3>📚 Materials</h3>
      <strong>Pamphlets</strong>
      <ul>
        <li><a href="materials/pamphlets/chemistry-pamphlet1.pdf" target="_blank">Chemistry Pamphlet 1</a></li>
      </ul>
      <strong>Textbooks</strong>
      <ul>
        <li><a href="materials/textbooks/chemistry-textbook1.pdf" target="_blank">Chemistry Textbook 1</a></li>
      </ul>
      <h3>📝 Test Yourself</h3>
      <ul>
        <li><a href="quizzes/chemistry-quiz1.pdf" target="_blank">Chemistry Quiz 1</a></li>
      </ul>
    </section>
  </main>

  <footer>
    Godfrey Mumbi Academy — The way to simplify your education journey, the way to go.
  </footer>

  <!-- Dynamic loader script: adds new resources automatically without altering your design -->
  <script>
    (function() {
      const subjects = ['math', 'english', 'science', 'biology', 'chemistry'];
      const sources = [
        { file: 'videos.html', type: 'video' },
        { file: 'pamphlets.html', type: 'pamphlet' },
        { file: 'text books.html', type: 'textbook' },
        { file: 'quizzes.html', type: 'quiz' }
      ];

      function getYouTubeID(url) {
        const match = url.match(/(?:youtube\.com.*[?&]v=|youtu\.be\/)([\w-]+)/);
        return match ? match[1] : '';
      }

      function getTargetUl(section, label) {
        // label should be lowercase keyword like 'pamphlet', 'textbook', 'quiz'
        const strongs = section.querySelectorAll('strong');
        for (const s of strongs) {
          if (s.textContent.toLowerCase().includes(label)) {
            const nxt = s.nextElementSibling;
            if (nxt && nxt.tagName === 'UL') return nxt;
          }
        }
        // fallback: last UL in section
        return section.querySelector('ul:last-of-type');
      }

      subjects.forEach(subject => {
        const section = document.querySelector(`section.${subject}`);
        if (!section) return;

        sources.forEach(src => {
          fetch(src.file)
            .then(r => r.ok ? r.text() : '')
            .then(html => {
              if (!html) return;
              const parser = new DOMParser();
              const doc = parser.parseFromString(html, 'text/html');
              const items = doc.querySelectorAll(`[data-subject="${subject}"]`);
              if (!items.length) return;

              items.forEach(item => {
                const title = item.getAttribute('data-title') || 'Untitled';
                const url = item.textContent.trim();

                switch (src.type) {
                  case 'video': {
                    const vidId = getYouTubeID(url);
                    if (!vidId) return;
                    const iframe = document.createElement('iframe');
                    iframe.src = `https://www.youtube.com/embed/${vidId}`;
                    iframe.width = '300';
                    iframe.height = '200';
                    iframe.setAttribute('frameborder', '0');
                    iframe.setAttribute('allowfullscreen', 'true');
                    // Insert after the Videos h3 (first one in section)
                    const videoHeader = Array.from(section.querySelectorAll('h3')).find(h => h.textContent.includes('🎥'));
                    if (videoHeader) videoHeader.insertAdjacentElement('afterend', iframe);
                    break;
                  }
                  case 'pamphlet': {
                    const ul = getTargetUl(section, 'pamphlet');
                    if (ul) {
                      const li = document.createElement('li');
                      li.innerHTML = `<a href="${url}" target="_blank">${title}</a>`;
                      ul.appendChild(li);
                    }
                    break;
                  }
                  case 'textbook': {
                    const ul = getTargetUl(section, 'textbook');
                    if (ul) {
                      const li = document.createElement('li');
                      li.innerHTML = `<a href="${url}" target="_blank">${title}</a>`;
                      ul.appendChild(li);
                    }
                    break;
                  }
                  case 'quiz': {
                    const ul = getTargetUl(section, 'quiz');
                    if (ul) {
                      const li = document.createElement('li');
                      li.innerHTML = `<a href="${url}" target="_blank">${title}</a>`;
                      ul.appendChild(li);
                    }
                    break;
                  }
                }
              });
            })
            .catch(() => {/* ignore errors for missing files */});
        });
      });
    })();
  </script>
</body>
</html>
