<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Godfrey Mumbi Academy Dashboard</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #ffffff;
      color: #333;
    }
    header {
      background-color: #222;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
    section {
      padding: 1.5rem;
      border-bottom: 1px solid #ddd;
    }
    h2 {
      margin-top: 0;
    }
    .subject-section {
      margin-bottom: 2rem;
      border-radius: 8px;
      padding: 1rem;
    }
    .math { background-color: #f2f2f2; }
    .english { background-color: #e0f7fa; }
    .science { background-color: #e8f5e9; }
    .biology { background-color: #f3e5f5; }
    .chemistry { background-color: #fff3e0; }
    iframe {
      max-width: 100%;
      margin: 0.5rem 0;
    }
    footer {
      background-color: orange;
      color: white;
      text-align: center;
      padding: 1rem;
      font-style: italic;
    }
    ul { padding-left: 1.2rem; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .resource-toggle {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 1rem;
    }
    .resource-toggle button {
      padding: 0.6rem 1.2rem;
      background-color: #222;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .resource-toggle button:hover {
      background-color: #444;
    }
    .resource-group {
      display: none;
    }
    .resource-group.active {
      display: block;
    }
    .dashboard-image {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-bottom: 4px solid orange;
    }
  </style>
</head>
<body>
  <header>
    <h1>Subject Dashboard</h1>
  </header>
  <img src="images/academy-cover.jpg" alt="Welcome" class="dashboard-image" />

  <main>
    <section class="resource-toggle">
      <button onclick="showGroup('videos')">üé• Videos</button>
      <button onclick="showGroup('pamphlets')">üìö Pamphlets</button>
      <button onclick="showGroup('textbooks')">üìò Textbooks</button>
      <button onclick="showGroup('quizzes')">üìù Quizzes</button>
    </section>

    <section id="videos" class="resource-group">
      <!-- Video sections by subject -->
    </section>

    <section id="pamphlets" class="resource-group">
      <!-- Pamphlet sections by subject -->
    </section>

    <section id="textbooks" class="resource-group">
      <!-- Textbook sections by subject -->
    </section>

    <section id="quizzes" class="resource-group">
      <!-- Quiz sections by subject -->
    </section>
  </main>

  <footer>
    Godfrey Mumbi Academy ‚Äî The way to simplify your education journey, the way to go.
  </footer>

  <script>
    function showGroup(id) {
      document.querySelectorAll('.resource-group').forEach(group => {
        group.classList.remove('active');
      });
      document.getElementById(id).classList.add('active');
    }

    // Restore state on page reload
    window.addEventListener('beforeunload', () => {
      document.querySelectorAll('.resource-group').forEach(group => group.classList.remove('active'));
    });

    // Dynamic loader script
    (function() {
      const subjects = ['math', 'english', 'science', 'biology', 'chemistry'];
      const sources = [
        { file: 'videos.html', type: 'video' },
        { file: 'pamphlets.html', type: 'pamphlet' },
        { file: 'text books.html', type: 'textbook' },
        { file: 'quizzes.html', type: 'quiz' }
      ];

      function getYouTubeID(url) {
        const match = url.match(/(?:youtube\.com.*[?&]v=|youtu\.be\/)([\w-]+)/);
        return match ? match[1] : '';
      }

      function getOrCreateSubjectDiv(group, subject) {
        let div = group.querySelector(`.subject-section.${subject}`);
        if (!div) {
          div = document.createElement('div');
          div.className = `subject-section ${subject}`;
          div.innerHTML = `<h2>${subject.charAt(0).toUpperCase() + subject.slice(1)}</h2>`;
          group.appendChild(div);
        }
        return div;
      }

      sources.forEach(src => {
        fetch(src.file)
          .then(r => r.ok ? r.text() : '')
          .then(html => {
            if (!html) return;
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            subjects.forEach(subject => {
              const group = document.getElementById(src.type + 's');
              if (!group) return;
              const items = doc.querySelectorAll(`[data-subject="${subject}"]`);
              if (!items.length) return;

              const section = getOrCreateSubjectDiv(group, subject);

              items.forEach(item => {
                const title = item.getAttribute('data-title') || 'Untitled';
                const url = item.textContent.trim();

                if (src.type === 'video') {
                  const vidId = getYouTubeID(url);
                  if (!vidId) return;
                  const iframe = document.createElement('iframe');
                  iframe.src = `https://www.youtube.com/embed/${vidId}`;
                  iframe.width = '300';
                  iframe.height = '200';
                  iframe.setAttribute('frameborder', '0');
                  iframe.setAttribute('allowfullscreen', 'true');
                  section.appendChild(iframe);
                } else {
                  const ul = section.querySelector('ul') || document.createElement('ul');
                  const li = document.createElement('li');
                  li.innerHTML = `<a href="${url}" target="_blank">${title}</a>`;
                  ul.appendChild(li);
                  section.appendChild(ul);
                }
              });
            });
          });
      });
    })();
  </script>
</body>
</html>

